```python
import sys
import collections

T = int(sys.stdin.readline().rstrip())

for _ in range(T):
    N, M = map(int, sys.stdin.readline().split())

    graph_ = collections.defaultdict(list)
    visited = set()
    count = 0

    for _ in range(M):
        a, b = map(int, sys.stdin.readline().split())
        
        graph_[a].append(b)
        graph_[b].append(a)

    start_node = next(iter(graph_))
    queue = collections.deque([start_node])
    visited.add(start_node)

    while queue:
        node = queue.popleft()
        for neighbor in graph_[node]:
            if neighbor not in visited:
                visited.add(neighbor)
                queue.append(neighbor)
                count += 1

    print(count)
```
