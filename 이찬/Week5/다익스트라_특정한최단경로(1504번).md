```python
import sys
import heapq
import collections

N, E = tuple(map(int, sys.stdin.readline().rstrip().split()))
graph = collections.defaultdict(list)

for _ in range(E):
    u, v, w = tuple(map(int, sys.stdin.readline().rstrip().split()))
    graph[u].append((v, w))
    graph[v].append((u, w))

V1, V2 = tuple(map(int, sys.stdin.readline().rstrip().split()))

Q = [(0, 1)]
dist = collections.defaultdict(lambda: float('inf'))
dist[1] = 0

while Q:
    length, node = heapq.heappop(Q)

    if length > dist[node]:
        continue

    for child, w in graph[node]:
        alt = length + w
        if alt < dist[child]:
            dist[child] = alt
            heapq.heappush(Q, (alt, child))

if dist[V1] == float('inf') or dist[V2] == float('inf'):
    print(-1)
    sys.exit(0)

dist_v1 = collections.defaultdict(lambda: float('inf'))
dist_v1[V1] = dist[V1]
Q = [(dist[V1], V1)]

while Q:
    length, node = heapq.heappop(Q)

    if length > dist_v1[node]:
        continue

    for child, w in graph[node]:
        alt = length + w
        if alt < dist_v1[child]:
            dist_v1[child] = alt
            heapq.heappush(Q, (alt, child))

if dist_v1[V2] == float('inf'):
    print(-1)
    sys.exit(0)

dist_v2 = collections.defaultdict(lambda: float('inf'))
dist_v2[V2] = dist_v1[V2]
Q = [(dist_v1[V2], V2)]

while Q:
    length, node = heapq.heappop(Q)

    if length > dist_v2[node]:
        continue

    for child, w in graph[node]:
        alt = length + w
        if alt < dist_v2[child]:
            dist_v2[child] = alt
            heapq.heappush(Q, (alt, child))

route1 = dist_v2[N]

dist_v2_rev = collections.defaultdict(lambda: float('inf'))
dist_v2_rev[V2] = dist[V2]
Q = [(dist[V2], V2)]

while Q:
    length, node = heapq.heappop(Q)

    if length > dist_v2_rev[node]:
        continue

    for child, w in graph[node]:
        alt = length + w
        if alt < dist_v2_rev[child]:
            dist_v2_rev[child] = alt
            heapq.heappush(Q, (alt, child))

if dist_v2_rev[V1] == float('inf'):
    print(-1)
    sys.exit(0)

dist_v1_rev = collections.defaultdict(lambda: float('inf'))
dist_v1_rev[V1] = dist_v2_rev[V1]
Q = [(dist_v2_rev[V1], V1)]

while Q:
    length, node = heapq.heappop(Q)

    if length > dist_v1_rev[node]:
        continue

    for child, w in graph[node]:
        alt = length + w
        if alt < dist_v1_rev[child]:
            dist_v1_rev[child] = alt
            heapq.heappush(Q, (alt, child))

route2 = dist_v1_rev[N]

result = min(route1, route2)
print(result if result < float('inf') else -1)
```
