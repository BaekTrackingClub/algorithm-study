```python
import sys
import collections
import heapq

n,m,r = map(int,sys.stdin.readline().rstrip().split())
# n,m,r = map(int,input().split())

lst = list(map(int,sys.stdin.readline().rstrip().split()))
# lst = list(map(int,input().split()))

graph = collections.defaultdict(list)

for _ in range(r):
    u,v,w = map(int,sys.stdin.readline().rstrip().split())
    # u,v,w = map(int,input().split())
    graph[u].append((v,w))
    graph[v].append((u,w))

items = []

for i in range(1,n+1):
    Q = [(0,i)]
    dist = collections.defaultdict(lambda: float('inf'))
    dist[i] = 0

    while Q:
        length, node = heapq.heappop(Q)
    
        if length > dist[node]:
            continue
    
        for child, w in graph[node]:
            alt = length + w
            if alt < dist[child]:
                dist[child] = alt
                heapq.heappush(Q, (alt, child))

    keys = []
    
    for k, v in dist.items():
        if v <= m:
            keys.append(k)

    count = 0
    for k in keys:
        count += lst[k-1]

    items.append(count)

print(max(items))
```
